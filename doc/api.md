# Взаимодействие бота и сайта

Каждая отправка текста пользователем будет инициировать:
1. Внесение текста в БД сайта
2. Отправку запроса Нейроботу

## Отправка собщений

1. Ответить юзеру можно, отправив POST-запрос на http://bot.gexar.tk/api/
В запросе должны быть следующие параметры:
	* send_message — любое не пустое значение, например "1"
	* ssid — сессия юзера
	* text — текст сообщения

2. Для ручного теста можно вставить в строку браузера:

`data:text/html,<form action="http://bot.gexar.tk/api/" method="post"><input name="send_message" value="1"><input name="ssid"><input name="name"><input name="text"><button type="submit">Send</button></form>`

3. Ответ приходит в формате:
`[{"ответ", "время"}]`

## Получение сообщений

1. Получить последнее сообщение юзера можно, отправив POST-запрос на http://bot.gexar.tk/api/
В запросе должны быть следующие параметры:
	* get_message — любое не пустое значение, например "1"
	* ssid — сессия юзера

2. Ответ приходит в формате:
	* `[{"текст", "время"}]`
	* если требуется, можно вывести в поле "ответ" содержимое всей строки из БД
		* Доступны: 'id', 'ssid', 'name', 'text', 'updated'

## Разное

1. Для отладки и т.п. 
	* по адресу http://bot.gexar.tk/request_test.php скрипт будет зеркалить post-запросы в json